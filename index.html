<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS0S - Chasse Ã  la Lune</title>
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Model Viewer pour l'AR -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
</head>
<body>
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         Ã‰CRAN DE CHARGEMENT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="loading-screen">
        <div class="moon-loader"></div>
        <p>Chargement de la Lune...</p>
        <div class="progress-bar">
            <div id="progress-fill"></div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         Ã‰CRAN DE SELFIE (OBLIGATOIRE AU DÃ‰MARRAGE)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="selfie-screen">
        <h1>ğŸ“¸ GPS0S</h1>
        <p>Prends un selfie pour commencer</p>
        <video id="selfie-video" autoplay playsinline></video>
        <canvas id="selfie-canvas" style="display:none;"></canvas>
        <button id="take-selfie-btn">ğŸ“¸ Capturer</button>
        <img id="selfie-preview" style="display:none;">
        <button id="start-game-btn" style="display:none;">ğŸš€ DÃ©marrer l'aventure</button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         INTERFACE PRINCIPALE DU JEU
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="game-container" style="display:none;">
        
        <!-- HEADER : INFOS JOUEUR -->
        <div id="header">
            <div class="header-item">
                <span class="label">Point</span>
                <span id="current-point" class="value">1/9</span>
            </div>
            <div class="header-item">
                <span class="label">Ã‰nergie</span>
                <span id="energy-display" class="value">100%</span>
            </div>
            <div class="header-item">
                <span class="label">Points</span>
                <span id="player-points" class="value">0</span>
            </div>
        </div>

        <!-- INDICATEUR DE ZONE GPS -->
        <div id="zone-indicator" class="zone-red">
            <div class="zone-icon">ğŸ“</div>
            <div id="distance" class="zone-text">Calcul en cours...</div>
        </div>

        <!-- BOUSSOLE -->
        <div id="compass-container">
            <div id="compass-needle"></div>
            <button id="compass-btn">ğŸ§­ Boussole</button>
        </div>

        <!-- BOUTON AR (ApparaÃ®t en zone bleue) -->
        <button id="ar-btn" style="display:none;">ğŸ“¸ Lancer l'AR</button>

        <!-- BOUTON BOUTIQUE -->
        <button id="shop-btn" onclick="toggleShop()">ğŸ›’ Boutique</button>

        <!-- BOUTON COFFRE (Lunes capturÃ©es) -->
        <button id="chest-btn">
            ğŸ“¦ Coffre
            <span id="moon-count">0</span>
        </button>

    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         CONTENEUR AR (RÃ‰ALITÃ‰ AUGMENTÃ‰E)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="ar-container" style="display:none;">
        <model-viewer
            id="ar-viewer"
            src="models/moon.glb"
            ios-src="models/moon.usdz"
            ar
            ar-modes="webxr scene-viewer quick-look"
            camera-controls
            auto-rotate
            shadow-intensity="1"
            alt="Lune 3D">
            <button slot="ar-button" id="ar-activate-btn">Voir en AR</button>
        </model-viewer>
        <button id="close-ar-btn" onclick="closeAR()">âœ– Fermer</button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         DIALOGUE DE LA LUNE NARRATRICE
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="moon-dialog">
        <div class="moon-avatar">ğŸŒ™</div>
        <p id="moon-text"></p>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MODAL BOUTIQUE
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="shop-modal">
        <div class="shop-header">
            <h2>ğŸ›’ Boutique Lunaire</h2>
            <p>Points : <span id="shop-points-display">0</span></p>
            <button onclick="toggleShop()">âœ–</button>
        </div>
        <div id="shop-items"></div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCRIPTS (Ordre d'importation crucial)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script src="js/selfie.js"></script>
    <script src="js/gps.js"></script>
    <script src="js/energy.js"></script>
    <script src="js/ar.js"></script>
    <script src="js/moon.js"></script>
    <script src="js/shop.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
